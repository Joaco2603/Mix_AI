<h1 align="center">MIX IA</h1>

## Demostraci√≥n de Funcionamiento (haz click en el logo)
<div align="center">
  <a href="https://drive.google.com/file/d/1fF2qV_4I3gQiNyiULuws_Qy0VWonrJZW/view?usp=drivesdk">
    <img src="./docs/logo.png" width="260" alt="Demo funcionamiento MIX IA" />
  </a>
</div>


## Estructura del Repositorio
```text
/docs/                   # Documentaci√≥n extendida: diagramas (arquitectura/flujo), notas t√©cnicas y PDFs
/hardware/               # Esquemas el√©ctricos, diagramas de conexi√≥n, archivos CAD/3D (piezas impresas) y PCB
/software/               # C√≥digo fuente principal: firmware (ESP32), backend (volume-api, volume-mcp), frontend-client
/models/                 # Prompts, configuraciones y artefactos relacionados con LLM (Gemini / adaptadores locales)
/tests/                  # Pruebas unitarias e integraciones (backend, MCP, frontend y mock firmware)
/examples/               # Ejemplos reproducibles: curl, scripts de demo y casos de uso (shortcuts de comandos)
README.md                # Descripci√≥n general del proyecto (este fichero)
ARCHITECTURE.md          # Documentaci√≥n detallada de la arquitectura y decisiones de dise√±o
SETUP.md                 # Gu√≠a de instalaci√≥n y despliegue (entornos local / producci√≥n)
CONTRIBUTING.md          # Normas y plantillas para colaborar (PRs, Issues, pruebas)
LICENSE                  # Licencia del proyecto (Creative Commons / otros)
CHANGELOG.md             # Registro de cambios y versiones
```

## Wiki

Documentaci√≥n extendida y gu√≠as: https://deepwiki.com/Joaco2603/Mix_AI

## D√≥nde empezar

- Quick start y pasos para ejecutar el sistema: `SETUP.md`.
- Documentaci√≥n t√©cnica y decisiones de dise√±o: `ARCHITECTURE.md`.
- Historial de cambios y versiones: `CHANGELOG.md`.
- C√≥mo contribuir (PRs / Issues / normas): `CONTRIBUTING.md`.
- Licencia del proyecto: `LICENSE`.

## Informaci√≥n del Proyecto
- **Jeffry Valverde** ‚Äì Coordinador General, responsable de AI & IoT. GitHub: [JeffryVF](https://github.com/JeffryVF)
- **Joaqu√≠n Pappa** ‚Äì Coordinador de Desarrollo Back-end & IoT. GitHub: [Joaco2603](https://github.com/Joaco2603)
- **Dylan Josue** ‚Äì Coordinador de Desarrollo Front-end. GitHub: [Djch18](https://github.com/Djch18)
- **Andr√©s Calvo** ‚Äì Coordinador de Procesos y Gesti√≥n de Proyecto. GitHub: [AndresACV](https://github.com/AndresACV)

## Descripci√≥n y Justificaci√≥n
- **Problema que se aborda:**  
Muchos m√∫sicos no tienen conocimientos t√©cnicos de mezcla de sonido o configuraci√≥n de sistemas de audio complejos. Esto dificulta su capacidad para presentarse en vivo o transmitir sin depender de t√©cnicos especializados.

- **Importancia y contexto:**  
Existen mezcladoras y software complejos, pero pocos dispositivos accesibles que permitan controlar el sonido mediante lenguaje natural. El proyecto busca facilitar la vida de m√∫sicos y creadores al permitir que puedan ajustar su sonido simplemente con comandos de voz o texto.

- **Usuarios/beneficiarios:**
    -  M√∫sicos (profesionales y amateurs)
    - T√©cnicos de sonido en eventos peque√±os
    - Creadores de contenido musical
    - Escuelas de m√∫sica y estudios caseros

## Objetivos del Proyecto
- **Objetivo General:**
Desarrollar una mezcladora de audio inteligente potenciada por un modelo de lenguaje (LLM), que permita a los usuarios modificar configuraciones de sonido usando lenguaje natural.
- **Objetivos Espec√≠ficos:**  
    - Integrar un microcontrolador con sensores y m√≥dulos de audio.
    - Establecer comunicaci√≥n entre el hardware y una LLM para interpretar comandos.
    - Dise√±ar una interfaz simple y accesible para el usuario.
    - Conectar el LLM con un MCP para facilitar la compresi√≥n del lenguaje natural.

## Requisitos Iniciales
- Lista breve de lo que el sistema debe lograr:  
  - Interpretar comandos de audio en lenguaje natural. 
  - Controlar niveles de salida y efectos de sonido en tiempo real.
  - Tener una interfaz f√≠sica o digital intuitiva.

- **Componentes:**
  
  - Microcontroladores usados:
    - ESP32 M5Stack Core2 (M5Stack Core2 V1.1) ‚Äî hardware principal del firmware y la interfaz t√°ctil. M√°s info: https://docs.m5stack.com/
    - Ideaboard ‚Äî placa adicional usada en algunos prototipos (variante ESP32/Arduino).

  - Sensores / Actuadores / Perif√©ricos:
    - M√≥dulo DAC PCM5102 (I2S) ‚Äî salida de audio para altavoz externo. Datasheet: https://www.ti.com/lit/ds/symlink/pcm5102a.pdf
    - Parlante (Rienok) ‚Äî altavoz conectado a la salida del DAC.
    - Cable de audio jack 3.5 ‚Äî para salida anal√≥gica/conexiones externas.
    - Tarjeta SD / almacenamiento (usado por `WavReader` / `AudioPlayer`) ‚Äî controlador SD: https://www.arduino.cc/reference/en/libraries/sd/
    - Interfaz t√°ctil / botones del M5Stack Core2 (UI f√≠sica) ‚Äî ver docs M5Stack: https://docs.m5stack.com/

  - LLM empleado (cloud / local):
    - Gemini 2.5 Pro (cloud) ‚Äî integrado v√≠a Google Cloud / Vertex AI desde `volume-api`. Docs y gu√≠as: https://cloud.google.com/vertex-ai/docs/generative-ai
    - (Opcional/local) Soporte para LLM local ‚Äî el dise√±o permite usar alternativas locales (por ejemplo Llama 3.x) si se adapta el `VolumeService`/cliente de chat.

  - Librer√≠as clave (con documentaci√≥n oficial):
    - ESP32 Arduino core ‚Äî documentaci√≥n oficial: https://docs.espressif.com/projects/arduino-esp32/en/latest/
    - Espressif I2S (I2S API para manejar PCM5102): https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/peripherals/i2s.html
    - PlatformIO (entorno/gestor de proyectos para el firmware): https://platformio.org/
    - M5Stack / M5Core2 libraries (UI, display, touch): https://docs.m5stack.com/
    - Arduino SD library (lectura/escritura de WAV desde SD): https://www.arduino.cc/reference/en/libraries/sd/
    - Spring Boot (API & MCP services): https://spring.io/projects/spring-boot
    - Spring AI / Chat integrations (cliente de chat usado en `volume-api`): https://spring.io/projects/spring-ai
    - RestTemplate (cliente HTTP usado en `volume-mcp`): https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html
    - Biblioteca de audio I2S incluida (repositorio local): `microcontroller-firmware/lib/ESP32-audioI2S/` ‚Äî ver c√≥digo incluido en el repo.

---

## Progreso del Proyecto

### 1. Modelo y impresi√≥n 3D
<img src="./hardware/Paso_1.jpeg" width="400" alt="Modelo 3D en TinkerCad" />

Se dise√±√≥ un modelo en TinkerCad utilizando las medidas del ESP32 y el PCM5102 para ocultar los cables. La pieza fue impresa en 3D.

## Link del Diagrama de la Pieza 3D:
https://www.tinkercad.com/things/dmCiIZABGQX-brilliant-kieran-snicket/edit?returnTo=https%3A%2F%2Fwww.tinkercad.com%2Fdashboard&sharecode=J4qVyTr3OJeEgzTjWTHMvxQUkrp-lW0_cSCWPZfWp7A

### 2. Pintura inspirada en el logo
<img src="./hardware/Paso_2.jpeg" width="400" alt="Pieza 3D pintada" />

La pieza 3D se pint√≥ inspir√°ndose en el logo definido para el sistema ciberf√≠sico.

### 3. Soldadura de componentes
<img src="./hardware/Paso_3.jpeg" width="400" alt="Soldadura PCM5102 a ESP32" />

Se sold√≥ el PCM5102 a la ESP32 para conectar un altavoz externo.

### 4. Ensamblaje final
<img src="./hardware/Paso_4.jpeg" width="400" alt="Vista ensamblada y pintada" />

Vista del ESP32 con el PCM5102 soldado y pintado dentro de la pieza 3D.

### 5. Vista principal del proyecto
<img src="./hardware/Paso_5.jpeg" width="400" alt="Vista principal MIXIA" />

Vista principal del Proyecto MIXIA funcionando en el ESP32.

---

## Diagramas y Esquemas

### Diagrama de Arquitectura
<img src="./docs/Diagrama_Arquitectura.png" width="1575" alt="Diagrama de Arquitectura" />

El diagrama muestra la relaci√≥n entre el Frontend (NextJS), la API (`volume-api`), el servidor MCP (`volume-mcp`) y el firmware del microcontrolador (ESP32). El flujo principal de comandos del usuario pasa por el Frontend hacia la API, que usa un cliente de chat (LLM) y solicita acciones al MCP para controlar el hardware.

### Diagrama de Flujo de Datos
<img src="./docs/Diagrama_Flujo.png" width="1575" alt="Diagrama de Flujo de Datos" />

Flujo de datos:

- Usuario ‚Üí Frontend: el usuario env√≠a comandos por voz o texto.
- Frontend ‚Üí API (`/chat`): se realiza una petici√≥n REST con la instrucci√≥n.
- API ‚Üí LLM/ChatClient: la API formatea la petici√≥n y consulta al LLM para interpretar o extraer la intenci√≥n.
- API ‚Üí MCP: si la intenci√≥n requiere acci√≥n sobre hardware (ej. cambiar volumen, mute), la API invoca al MCP.
- MCP ‚Üí Microcontrolador: el MCP llama al firmware del ESP32 (por HTTP o RPC definido) para aplicar cambios (setVolume, mute, etc.).
- Microcontrolador ‚Üí Hardware: el firmware ajusta el `AudioMixer`, controla salidas (PCM5102) y recibe datos de sensores.
- Microcontrolador ‚Üí Frontend (opcional): el WebServer en el firmware puede exponer estado para refrescar la UI.

### Esquema El√©ctrico
<img src="./hardware/Diagrama_Electrico.jpeg" width="700" alt="Diagrama El√©ctrico" />

Conexiones de pines entre ESP32 M5Stack Core2 V1.1, m√≥dulo DAC PCM5102, sensores y actuadores (parlante, botones, etc.).

‚ö†Ô∏è Nota importante sobre pines

Las conexiones mostradas en este diagrama aplican √∫nicamente para el ESP32 M5Stack Core2 V1.1.
Este modelo de ESP32 ya trae expuestos los pines necesarios para trabajar con el DAC PCM5102 mediante la interfaz I2S:

- LRCK (WS) ‚Üí Pin interno asignado como I2S_WS
- BCK (SCK) ‚Üí Pin interno asignado como I2S_BCK
- DIN (DATA) ‚Üí Pin interno asignado como I2S_DATA
- GND y 3.3V disponibles en los headers laterales.

Otros modelos de ESP32 o revisiones distintas del M5Stack pueden tener diferente mapeo de pines, por lo que este diagrama no es universal y debe adaptarse a la variante de hardware utilizada.

### üéØ Funcionalidades Implementadas

- **Chat con IA**: Interacci√≥n en lenguaje natural con Gemini
- **Control de Volumen**: Ajuste de volumen por instrumento
- **Lista de Instrumentos**: Consulta de instrumentos disponibles
- **Scope Limitado**: Solo responde preguntas relacionadas con audio
- **Arquitectura MCP**: Comunicaci√≥n entre servicios usando Model Context Protocol

---

  - Este proyecto est√° bajo la licencia [Creative Commons Attribution-NonCommercial 4.0 International (CC BY-NC 4.0)](https://creativecommons.org/licenses/by-nc/4.0/).
